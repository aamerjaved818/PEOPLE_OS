{"id":"audit-20260110-235320","created_at":"2026-01-10T23:53:33.382123","version":"1.0.0","scope":"Full System","overall_score":4.0,"critical_count":2,"major_count":17,"minor_count":11,"risk_level":"High","dimension_scores":[{"dimension":"Code Quality","score":5.0,"findings_count":0,"action_items_count":0,"details":{"typescript_errors":0,"eslint_errors":0,"python_errors":0,"type_coverage":100.0}},{"dimension":"Security","score":5.0,"findings_count":1,"action_items_count":0,"details":{"rbac_coverage":241,"exposed_secrets":4,"unprotected_endpoints":0,"rate_limited_endpoints":14}},{"dimension":"Testing","score":0.0,"findings_count":1,"action_items_count":0,"details":{"test_coverage":8,"total_tests":11,"test_files":20,"untested_critical_paths":0}},{"dimension":"Database","score":5.0,"findings_count":16,"action_items_count":0,"details":{"foreign_keys_enforced":1,"indexes_count":110,"tables_without_indexes":1,"migration_files":7,"orphaned_records_risk":0}},{"dimension":"API","score":0.5,"findings_count":1,"action_items_count":0,"details":{"total_endpoints":0,"versioned_endpoints":0,"breaking_changes":0,"new_endpoints":0,"schema_size_kb":0}},{"dimension":"Architecture","score":5.0,"findings_count":0,"action_items_count":0,"details":{"cycle_count":0,"boundary_violations":0,"modules_scanned":335,"dependency_edges":1373}},{"dimension":"UI/UX","score":3.3,"findings_count":1,"action_items_count":0,"details":{"hardcoded_colors":0,"hardcoded_spacing":46,"component_reuse":33,"accessibility_violations":12,"css_files":0,"responsive_layouts":73,"accessibility_files":["D:\\Python\\HCM_WEB\\modules\\OrgSetup.tsx","D:\\Python\\HCM_WEB\\modules\\SystemHealth.tsx","D:\\Python\\HCM_WEB\\modules\\SystemSettings.tsx","D:\\Python\\HCM_WEB\\modules\\admin\\ComplianceSettings.tsx","D:\\Python\\HCM_WEB\\modules\\admin\\SystemCleanup.tsx","D:\\Python\\HCM_WEB\\modules\\org-profile\\OrgChart.tsx","D:\\Python\\HCM_WEB\\modules\\org-setup\\DesignationManagement.tsx","D:\\Python\\HCM_WEB\\modules\\org-setup\\PayrollConfiguration.tsx","D:\\Python\\HCM_WEB\\modules\\org-setup\\ShiftManagement.tsx","D:\\Python\\HCM_WEB\\modules\\audit\\components\\SystemLogViewer.tsx","D:\\Python\\HCM_WEB\\components\\auth\\PermissionGate.tsx","D:\\Python\\HCM_WEB\\components\\auth\\RoleGuard.tsx"]}},{"dimension":"AI Layer","score":5.0,"findings_count":6,"action_items_count":0,"details":{"ai_integrations":57,"unpinned_models":0,"prompt_versioning":2,"input_validation":8,"ai_error_handling":18,"temperature_control":1,"grounding_instructions":1,"response_validation":5,"citation_extraction":1,"context_limits":2,"prompt_injection_protection":1,"pii_redaction":2,"rate_limiting":2,"fallback_behavior":0}},{"dimension":"DevOps","score":5.0,"findings_count":1,"action_items_count":0,"details":{"deployment_scripts":1,"backup_strategy":1,"environment_config":2,"docker_support":0,"ci_cd_config":1}},{"dimension":"Drift Detection","score":5.0,"findings_count":1,"action_items_count":0,"details":{"adr_count":9,"drift_violation_count":0,"undocumented_modules":1}},{"dimension":"Performance","score":4.7,"findings_count":1,"action_items_count":0,"details":{"memoization_usage":25,"lazy_loading":0,"virtualization":2,"large_assets":1,"img_optimization":0,"total_components":153}}],"critical_findings":[{"id":"90e083b1-5ddb-4286-8f63-002624f27192","dimension":"Security","severity":"Critical","title":"Potential hardcoded secret detected","description":"Found in test_auth_api.py","recommendation":"Move secrets to environment variables","line_number":null,"file_path":"D:\\Python\\HCM_WEB\\backend\\tests\\test_auth_api.py"},{"id":"bdc31f62-fb30-40e9-a506-c05a0ee1bff0","dimension":"API","severity":"Critical","title":"Could not load FastAPI app","description":"Failed to import 'app' from backend.main for inspection.","recommendation":"Fix import paths in analyzer.","line_number":null,"file_path":null}],"major_findings":[{"id":"cab8a501-2e0b-4709-9a36-a8db9e507b8b","dimension":"Testing","severity":"Major","title":"Test coverage estimated at 8%","description":"Low test coverage detected","recommendation":"Add unit tests for core modules","line_number":null,"file_path":null},{"id":"826810e3-7ccc-4542-a047-f60c781cd96e","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'organizations.tax_id'","description":"Column 'tax_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for tax_id","line_number":null,"file_path":null},{"id":"d2ab6e9b-511f-451d-9fbb-45cbe7c6ef87","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'departments.plant_id'","description":"Column 'plant_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for plant_id","line_number":null,"file_path":null},{"id":"7b43e444-e41a-4c06-86c4-4fa708dc4195","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'departments.hod_id'","description":"Column 'hod_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for hod_id","line_number":null,"file_path":null},{"id":"def7834b-8617-46bf-879a-b4ffd4692fe0","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'departments.manager_id'","description":"Column 'manager_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for manager_id","line_number":null,"file_path":null},{"id":"8dc6811e-42b4-457a-97bf-6749fd77a32d","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'grades.employment_level_id'","description":"Column 'employment_level_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for employment_level_id","line_number":null,"file_path":null},{"id":"8d1e9c2b-5534-40bc-9e55-063775bb44b7","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'sub_departments.parent_department_id'","description":"Column 'parent_department_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for parent_department_id","line_number":null,"file_path":null},{"id":"b4328514-1c9c-4b39-947b-644439900475","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'sub_departments.manager_id'","description":"Column 'manager_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for manager_id","line_number":null,"file_path":null},{"id":"6637aa02-cb7d-4531-9741-40c27d21dbb1","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'designations.grade_id'","description":"Column 'grade_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for grade_id","line_number":null,"file_path":null},{"id":"2e812106-08aa-49fe-88ec-905b04366892","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'positions.designation_id'","description":"Column 'designation_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for designation_id","line_number":null,"file_path":null},{"id":"8741dc27-6b0e-4aea-92ba-797e2cc9d9e4","dimension":"UI/UX","severity":"Major","title":"12 components lack accessibility attributes","description":"Missing aria-labels, alt text, or other a11y features","recommendation":"Add ARIA labels and alt text to improve accessibility","line_number":null,"file_path":null},{"id":"ff266914-5608-4921-ad8d-01a1a5910525","dimension":"AI Layer","severity":"Major","title":"Insufficient input validation on AI calls","description":"Not all AI integrations validate input data (8/57)","recommendation":"Add schema validation before sending data to AI models","line_number":null,"file_path":null},{"id":"efebebda-9eaf-47b6-b1a0-84d36a863abf","dimension":"AI Layer","severity":"Major","title":"Unsafe AI Temperature Settings","description":"Found 56 AI calls without explicit low-temperature settings (risk of hallucinations).","recommendation":"Set temperature=0.0-0.2 for factual tasks.","line_number":null,"file_path":null},{"id":"4f3bee8b-f7fe-47f5-9e10-4137e1b54b2c","dimension":"AI Layer","severity":"Major","title":"Missing Grounding Instructions","description":"Found 56 AI prompts without grounding constraints.","recommendation":"Include 'only use provided context' or similar constraints in prompts.","line_number":null,"file_path":null},{"id":"bcf4a886-5062-4865-9d43-ca5d1127dedb","dimension":"AI Layer","severity":"Major","title":"Missing Response Validation","description":"Found 52 AI calls without response validation.","recommendation":"Implement schema validation or parsing for AI outputs to catch malformed responses.","line_number":null,"file_path":null},{"id":"239b1a13-403a-4e60-a5af-32a5f09a7b03","dimension":"AI Layer","severity":"Major","title":"Insufficient Fallback Behavior","description":"Less than 50% of AI calls have fallback logic (0/57).","recommendation":"Implement graceful degradation with default responses when AI calls fail.","line_number":null,"file_path":null},{"id":"75d508cb-8b97-4646-96e7-6a9d7fb8ea2a","dimension":"Performance","severity":"Major","title":"Large Asset Detected: logo.png","description":"File size 577.3KB exceeds 500KB limit","recommendation":"Compress image or use Next.js Image Optimization","line_number":null,"file_path":"D:\\Python\\HCM_WEB\\public\\logo.png"}],"minor_findings":[{"id":"9151fd68-4f14-428f-9d5f-28ca5344a0cd","dimension":"Database","severity":"Minor","title":"Table 'test' has no indexes","description":"May impact query performance","recommendation":"Consider adding indexes to test","line_number":null,"file_path":null},{"id":"6178f0fc-f573-4468-9c25-e5329ef3eede","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'organizations'","description":"Table has 28 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"ab188d86-fdb9-48e8-8aa4-77cf5162faf2","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'shifts'","description":"Table has 22 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"c5aef607-3a2b-4826-a630-432766d99864","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'system_flags'","description":"Table has 23 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"b8a75886-3206-49f4-a88a-9b1221f01992","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'notification_settings'","description":"Table has 33 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"9d5b0e58-0c40-4f5a-b3b0-b7668a20282e","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'employees'","description":"Table has 24 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"7fcf8f26-a679-4522-ae5f-1ba2906bfdc9","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'payroll_settings'","description":"Table has 22 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"8dc09b2f-52c2-4d1a-8b32-db30ad1140a2","dimension":"AI Layer","severity":"Minor","title":"Incomplete AI error handling","description":"Some AI calls lack proper error handling (18/57)","recommendation":"Wrap AI calls in try-catch with fallback logic","line_number":null,"file_path":null},{"id":"d11b2c3e-dd14-4f52-98d1-41d3562766d8","dimension":"DevOps","severity":"Minor","title":"Missing Security Policy","description":"SECURITY.md file found in root.","recommendation":"Add a SECURITY.md to define reporting procedures.","line_number":null,"file_path":null},{"id":"b526d074-5313-44b1-940d-ea11a0b118b7","dimension":"Architecture","severity":"Minor","title":"Undocumented Module: org-setup","description":"No ADR or architectural documentation found for the 'org-setup' module.","recommendation":"Create an ADR summarizing the module's purpose and key decisions.","line_number":null,"file_path":null},{"id":"43a64106-461c-432e-9c2d-941560c53947","dimension":"Drift Detection","severity":"Minor","title":"Rule Violation: undocumented_modules","description":"Value 1 exceeded max 0","recommendation":"Improve undocumented_modules to meet policy","line_number":null,"file_path":null}],"technical_debt":[],"action_plan":[{"issue":"Potential hardcoded secret detected","area":"Security","priority":"Critical","effort":"Days","eta":null,"owner":null},{"issue":"Could not load FastAPI app","area":"API","priority":"Critical","effort":"Days","eta":null,"owner":null},{"issue":"Test coverage estimated at 8%","area":"Testing","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'organizations.tax_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'departments.plant_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'departments.hod_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'departments.manager_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'grades.employment_level_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'sub_departments.parent_department_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'sub_departments.manager_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null}],"policy_results":[{"name":"release_security_gate","pass_status":false,"message":"Rule evaluation failed: name 'hardcoded_secrets' is not defined","enforced":true,"rule":"security_score >= 3.5 AND hardcoded_secrets == 0"},{"name":"release_quality_gate","pass_status":false,"message":"Rule evaluation failed: name 'code_quality' is not defined","enforced":true,"rule":"code_quality >= 3.0 AND typescript_errors == 0"},{"name":"release_testing_gate","pass_status":false,"message":"Success","enforced":false,"rule":"testing_score >= 3.0 AND untested_critical_paths <= 2"},{"name":"overall_health_gate","pass_status":false,"message":"Rule evaluation failed: name 'critical_findings' is not defined","enforced":true,"rule":"overall_score >= 3.0 AND critical_findings == 0"}],"executed_by":"CLI-Runner","execution_time_seconds":13.221642255783081}