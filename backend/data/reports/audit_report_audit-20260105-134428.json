{"id":"audit-20260105-134428","created_at":"2026-01-05T13:45:04.760944","version":"1.0.0","scope":"Full System","overall_score":3.0,"critical_count":2,"major_count":16,"minor_count":19,"risk_level":"High","dimension_scores":[{"dimension":"Code Quality","score":5.0,"findings_count":0,"action_items_count":0,"details":{"typescript_errors":0,"eslint_errors":0,"python_errors":0,"type_coverage":100.0}},{"dimension":"Security","score":5.0,"findings_count":1,"action_items_count":0,"details":{"rbac_coverage":166,"exposed_secrets":1,"unprotected_endpoints":0,"rate_limited_endpoints":2}},{"dimension":"Testing","score":0.0,"findings_count":1,"action_items_count":0,"details":{"test_coverage":8,"total_tests":7,"test_files":14,"untested_critical_paths":0}},{"dimension":"Database","score":3.5,"findings_count":16,"action_items_count":0,"details":{"foreign_keys_enforced":1,"indexes_count":40,"tables_without_indexes":5,"migration_files":0,"orphaned_records_risk":0}},{"dimension":"API","score":0.5,"findings_count":1,"action_items_count":0,"details":{"total_endpoints":0,"versioned_endpoints":0,"breaking_changes":0,"new_endpoints":0,"schema_size_kb":0}},{"dimension":"Architecture","score":5.0,"findings_count":0,"action_items_count":0,"details":{"cycle_count":0,"boundary_violations":0,"modules_scanned":334,"dependency_edges":1133}},{"dimension":"UI/UX","score":0.0,"findings_count":3,"action_items_count":0,"details":{"hardcoded_colors":51,"hardcoded_spacing":1031,"component_reuse":24,"accessibility_violations":101,"css_files":0,"responsive_layouts":57}},{"dimension":"AI Layer","score":5.0,"findings_count":6,"action_items_count":0,"details":{"ai_integrations":39,"unpinned_models":0,"prompt_versioning":2,"input_validation":10,"ai_error_handling":9,"temperature_control":1,"grounding_instructions":1,"response_validation":4,"citation_extraction":1,"context_limits":2,"prompt_injection_protection":1,"pii_redaction":2,"rate_limiting":2,"fallback_behavior":0}},{"dimension":"DevOps","score":5.0,"findings_count":1,"action_items_count":0,"details":{"deployment_scripts":1,"backup_strategy":1,"environment_config":2,"docker_support":0,"ci_cd_config":1}},{"dimension":"Drift Detection","score":1.5,"findings_count":7,"action_items_count":0,"details":{"adr_count":0,"drift_violation_count":0,"undocumented_modules":7}}],"critical_findings":[{"id":"f4659513-3665-4f8f-89c1-e40ffb8a36fa","dimension":"Security","severity":"Critical","title":"Potential hardcoded secret detected","description":"Found in test_custom_rules.py","recommendation":"Move secrets to environment variables","line_number":null,"file_path":"D:\\Python\\HCM_WEB\\backend\\audit\\tests\\test_custom_rules.py"},{"id":"15710cef-8bbf-490e-9234-3f062c62068a","dimension":"API","severity":"Critical","title":"Could not load FastAPI app","description":"Failed to import 'app' from backend.main for inspection.","recommendation":"Fix import paths in analyzer.","line_number":null,"file_path":null}],"major_findings":[{"id":"6ca42cc7-1b48-434f-b783-8154185cf2d5","dimension":"Testing","severity":"Major","title":"Test coverage estimated at 8%","description":"Low test coverage detected","recommendation":"Add unit tests for core modules","line_number":null,"file_path":null},{"id":"3581cae2-cb0c-41a3-ba8f-5a92f3a14874","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'employees.department_id'","description":"Column 'department_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for department_id","line_number":null,"file_path":null},{"id":"b1e08043-aa3a-4155-98ba-ed87f5df543d","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'employees.designation_id'","description":"Column 'designation_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for designation_id","line_number":null,"file_path":null},{"id":"28d5545c-0a50-4482-b0ef-2412a0cef2fd","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'employees.grade_id'","description":"Column 'grade_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for grade_id","line_number":null,"file_path":null},{"id":"d43e923f-69d8-4a3f-81ee-fdee07037390","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'employees.plant_id'","description":"Column 'plant_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for plant_id","line_number":null,"file_path":null},{"id":"6b5601d0-62fd-4938-b934-da221b695a0d","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'employees.shift_id'","description":"Column 'shift_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for shift_id","line_number":null,"file_path":null},{"id":"364671bd-9eb0-47c3-89a6-d44859e3e9d6","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'organizations.tax_id'","description":"Column 'tax_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for tax_id","line_number":null,"file_path":null},{"id":"9fd10071-9032-4206-b557-661ea905f88b","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'hr_plants.organization_id'","description":"Column 'organization_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for organization_id","line_number":null,"file_path":null},{"id":"16cf6226-9965-4b7b-9b2a-a489e54993fc","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'performance_reviews.employee_id'","description":"Column 'employee_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for employee_id","line_number":null,"file_path":null},{"id":"bcc41099-dd64-48bd-9f2c-fe85ade784f8","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'performance_reviews.reviewer_id'","description":"Column 'reviewer_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for reviewer_id","line_number":null,"file_path":null},{"id":"3eba5fb7-d4b1-49fc-b958-5b4fae685df0","dimension":"UI/UX","severity":"Major","title":"101 components lack accessibility attributes","description":"Missing aria-labels, alt text, or other a11y features","recommendation":"Add ARIA labels and alt text to improve accessibility","line_number":null,"file_path":null},{"id":"854c0628-836b-4445-8681-009b51840c0b","dimension":"AI Layer","severity":"Major","title":"Insufficient input validation on AI calls","description":"Not all AI integrations validate input data (10/39)","recommendation":"Add schema validation before sending data to AI models","line_number":null,"file_path":null},{"id":"e57c5e09-1a68-42df-9488-3e0f693a1d0a","dimension":"AI Layer","severity":"Major","title":"Unsafe AI Temperature Settings","description":"Found 38 AI calls without explicit low-temperature settings (risk of hallucinations).","recommendation":"Set temperature=0.0-0.2 for factual tasks.","line_number":null,"file_path":null},{"id":"9b9ab30f-8762-411d-96d8-3745790784e3","dimension":"AI Layer","severity":"Major","title":"Missing Grounding Instructions","description":"Found 38 AI prompts without grounding constraints.","recommendation":"Include 'only use provided context' or similar constraints in prompts.","line_number":null,"file_path":null},{"id":"999519a2-0659-45bc-8a71-afff061c32a4","dimension":"AI Layer","severity":"Major","title":"Missing Response Validation","description":"Found 35 AI calls without response validation.","recommendation":"Implement schema validation or parsing for AI outputs to catch malformed responses.","line_number":null,"file_path":null},{"id":"212c5031-5ab6-4998-b870-85e6f35b929d","dimension":"AI Layer","severity":"Major","title":"Insufficient Fallback Behavior","description":"Less than 50% of AI calls have fallback logic (0/39).","recommendation":"Implement graceful degradation with default responses when AI calls fail.","line_number":null,"file_path":null}],"minor_findings":[{"id":"771e42f1-a1ca-499a-8387-cc98a95f1b05","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'employees'","description":"Table has 66 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"d24ef077-406e-407c-8c0e-9115d638b91a","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'organizations'","description":"Table has 29 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"59e1e68f-5110-4643-974a-3fa95a813310","dimension":"Database","severity":"Minor","title":"Table 'employee_education' has no indexes","description":"May impact query performance","recommendation":"Consider adding indexes to employee_education","line_number":null,"file_path":null},{"id":"2c3149dd-655f-4571-9839-125e55282b4f","dimension":"Database","severity":"Minor","title":"Table 'employee_experience' has no indexes","description":"May impact query performance","recommendation":"Consider adding indexes to employee_experience","line_number":null,"file_path":null},{"id":"f0e41522-825f-4f2f-be4c-12f6e67ce360","dimension":"Database","severity":"Minor","title":"Table 'employee_family' has no indexes","description":"May impact query performance","recommendation":"Consider adding indexes to employee_family","line_number":null,"file_path":null},{"id":"64d96d3d-c538-4499-9cc1-abe1741dde2a","dimension":"Database","severity":"Minor","title":"Table 'employee_discipline' has no indexes","description":"May impact query performance","recommendation":"Consider adding indexes to employee_discipline","line_number":null,"file_path":null},{"id":"41cf1adc-8c38-40e8-a073-4552a378a8cf","dimension":"Database","severity":"Minor","title":"Table 'employee_increments' has no indexes","description":"May impact query performance","recommendation":"Consider adding indexes to employee_increments","line_number":null,"file_path":null},{"id":"1cbe70c6-1a19-456f-92e1-a3959e12b745","dimension":"UI/UX","severity":"Minor","title":"51 hardcoded color values detected","description":"Colors should use design tokens/CSS variables","recommendation":"Migrate hardcoded colors to design system tokens","line_number":null,"file_path":null},{"id":"013f6287-7786-406c-abfe-395b56d3adcd","dimension":"UI/UX","severity":"Minor","title":"1031 hardcoded spacing values","description":"Spacing should use design tokens (e.g., Tailwind classes)","recommendation":"Use consistent spacing scale from design system","line_number":null,"file_path":null},{"id":"99f218c3-a5f2-446c-b89d-2f32ee47d0d0","dimension":"AI Layer","severity":"Minor","title":"Incomplete AI error handling","description":"Some AI calls lack proper error handling (9/39)","recommendation":"Wrap AI calls in try-catch with fallback logic","line_number":null,"file_path":null},{"id":"661e3132-fb1c-4b94-8f00-b2d5ed939d25","dimension":"DevOps","severity":"Minor","title":"Missing Security Policy","description":"SECURITY.md file found in root.","recommendation":"Add a SECURITY.md to define reporting procedures.","line_number":null,"file_path":null},{"id":"33698128-69e0-4acc-86ed-8344f357b208","dimension":"Architecture","severity":"Minor","title":"Undocumented Module: analytics","description":"No ADR or architectural documentation found for the 'analytics' module.","recommendation":"Create an ADR summarizing the module's purpose and key decisions.","line_number":null,"file_path":null},{"id":"abb5b4e5-ba9b-490f-a480-064f92d6c381","dimension":"Architecture","severity":"Minor","title":"Undocumented Module: assets","description":"No ADR or architectural documentation found for the 'assets' module.","recommendation":"Create an ADR summarizing the module's purpose and key decisions.","line_number":null,"file_path":null},{"id":"7b57c578-b89b-4ab3-aa94-d8d3da70a242","dimension":"Architecture","severity":"Minor","title":"Undocumented Module: audit","description":"No ADR or architectural documentation found for the 'audit' module.","recommendation":"Create an ADR summarizing the module's purpose and key decisions.","line_number":null,"file_path":null},{"id":"f590611d-fc47-4faa-9733-c4eb91e40393","dimension":"Architecture","severity":"Minor","title":"Undocumented Module: employee","description":"No ADR or architectural documentation found for the 'employee' module.","recommendation":"Create an ADR summarizing the module's purpose and key decisions.","line_number":null,"file_path":null},{"id":"12249da8-1373-4745-9332-8286a7759347","dimension":"Architecture","severity":"Minor","title":"Undocumented Module: expenses","description":"No ADR or architectural documentation found for the 'expenses' module.","recommendation":"Create an ADR summarizing the module's purpose and key decisions.","line_number":null,"file_path":null},{"id":"12e55fc7-4e0f-46ca-9e06-7f16dd3b1cb0","dimension":"Architecture","severity":"Minor","title":"Undocumented Module: payroll","description":"No ADR or architectural documentation found for the 'payroll' module.","recommendation":"Create an ADR summarizing the module's purpose and key decisions.","line_number":null,"file_path":null},{"id":"70c0d62c-1d70-449f-b317-37f89eb323ca","dimension":"Architecture","severity":"Minor","title":"Undocumented Module: recruitment","description":"No ADR or architectural documentation found for the 'recruitment' module.","recommendation":"Create an ADR summarizing the module's purpose and key decisions.","line_number":null,"file_path":null},{"id":"52d73926-67dc-4d70-8136-57ced0c123cf","dimension":"Drift Detection","severity":"Minor","title":"Rule Violation: undocumented_modules","description":"Value 7 exceeded max 0","recommendation":"Improve undocumented_modules to meet policy","line_number":null,"file_path":null}],"technical_debt":[],"action_plan":[{"issue":"Potential hardcoded secret detected","area":"Security","priority":"Critical","effort":"Days","eta":null,"owner":null},{"issue":"Could not load FastAPI app","area":"API","priority":"Critical","effort":"Days","eta":null,"owner":null},{"issue":"Test coverage estimated at 8%","area":"Testing","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'employees.department_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'employees.designation_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'employees.grade_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'employees.plant_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'employees.shift_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'organizations.tax_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'hr_plants.organization_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null}],"policy_results":[{"name":"release_security_gate","pass_status":false,"message":"Rule evaluation failed: name 'hardcoded_secrets' is not defined","enforced":true,"rule":"security_score >= 3.5 AND hardcoded_secrets == 0"},{"name":"release_quality_gate","pass_status":false,"message":"Rule evaluation failed: name 'code_quality' is not defined","enforced":true,"rule":"code_quality >= 3.0 AND typescript_errors == 0"},{"name":"release_testing_gate","pass_status":false,"message":"Success","enforced":false,"rule":"testing_score >= 3.0 AND untested_critical_paths <= 2"},{"name":"overall_health_gate","pass_status":false,"message":"Rule evaluation failed: name 'critical_findings' is not defined","enforced":true,"rule":"overall_score >= 3.0 AND critical_findings == 0"}],"executed_by":"CLI-Runner","execution_time_seconds":36.48834180831909}