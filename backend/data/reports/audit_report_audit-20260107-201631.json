{"id":"audit-20260107-201631","created_at":"2026-01-07T20:16:51.270479","version":"1.0.0","scope":"Full System","overall_score":4.3,"critical_count":0,"major_count":22,"minor_count":11,"risk_level":"High","dimension_scores":[{"dimension":"Code Quality","score":5.0,"findings_count":0,"action_items_count":0,"details":{"typescript_errors":0,"eslint_errors":0,"python_errors":0,"type_coverage":100.0}},{"dimension":"Security","score":5.0,"findings_count":0,"action_items_count":0,"details":{"rbac_coverage":182,"exposed_secrets":0,"unprotected_endpoints":0,"rate_limited_endpoints":14}},{"dimension":"Testing","score":0.0,"findings_count":1,"action_items_count":0,"details":{"test_coverage":8,"total_tests":11,"test_files":18,"untested_critical_paths":0}},{"dimension":"Database","score":3.5,"findings_count":24,"action_items_count":0,"details":{"foreign_keys_enforced":1,"indexes_count":75,"tables_without_indexes":5,"migration_files":7,"orphaned_records_risk":0}},{"dimension":"Architecture","score":5.0,"findings_count":0,"action_items_count":0,"details":{"cycle_count":0,"boundary_violations":0,"modules_scanned":396,"dependency_edges":1363}},{"dimension":"UI/UX","score":4.8,"findings_count":0,"action_items_count":0,"details":{"hardcoded_colors":0,"hardcoded_spacing":7,"component_reuse":28,"accessibility_violations":1,"css_files":0,"responsive_layouts":61,"accessibility_files":["D:\\Python\\HCM_WEB\\modules\\admin\\SystemCleanup.tsx"]}},{"dimension":"AI Layer","score":5.0,"findings_count":6,"action_items_count":0,"details":{"ai_integrations":65,"unpinned_models":0,"prompt_versioning":2,"input_validation":11,"ai_error_handling":21,"temperature_control":1,"grounding_instructions":1,"response_validation":6,"citation_extraction":1,"context_limits":2,"prompt_injection_protection":1,"pii_redaction":2,"rate_limiting":2,"fallback_behavior":0}},{"dimension":"DevOps","score":5.0,"findings_count":1,"action_items_count":0,"details":{"deployment_scripts":1,"backup_strategy":1,"environment_config":2,"docker_support":0,"ci_cd_config":1}},{"dimension":"Drift Detection","score":5.0,"findings_count":0,"action_items_count":0,"details":{"adr_count":9,"drift_violation_count":0,"undocumented_modules":0}}],"critical_findings":[],"major_findings":[{"id":"bfb6841b-4ba0-4653-9a9e-e4253506381d","dimension":"Testing","severity":"Major","title":"Test coverage estimated at 8%","description":"Low test coverage detected","recommendation":"Add unit tests for core modules","line_number":null,"file_path":null},{"id":"46b7b369-fe7a-4fb7-9b50-bc6d7e3bf4b2","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'employees.department_id'","description":"Column 'department_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for department_id","line_number":null,"file_path":null},{"id":"113df808-3e22-4faa-8bf1-9d1e9b22bb68","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'employees.designation_id'","description":"Column 'designation_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for designation_id","line_number":null,"file_path":null},{"id":"f504987b-c664-407f-89bd-49cb41b5a6d6","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'employees.grade_id'","description":"Column 'grade_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for grade_id","line_number":null,"file_path":null},{"id":"df3d6862-eed7-4620-aade-b7b5d6c61134","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'employees.plant_id'","description":"Column 'plant_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for plant_id","line_number":null,"file_path":null},{"id":"9bc0a911-1dbf-42ec-a0e3-f779264f9b66","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'employees.shift_id'","description":"Column 'shift_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for shift_id","line_number":null,"file_path":null},{"id":"65071437-3df2-40c8-af0a-878fc5e5ac40","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'organizations.tax_id'","description":"Column 'tax_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for tax_id","line_number":null,"file_path":null},{"id":"b578b5b7-553d-45ea-a304-71edc34d7ca3","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'hr_plants.organization_id'","description":"Column 'organization_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for organization_id","line_number":null,"file_path":null},{"id":"a9683dfc-516a-4bd1-96c0-ddd17d846da7","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'grades.organization_id'","description":"Column 'organization_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for organization_id","line_number":null,"file_path":null},{"id":"dc81af5a-1fbd-425e-9165-6e8d3ba3a245","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'sub_departments.organization_id'","description":"Column 'organization_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for organization_id","line_number":null,"file_path":null},{"id":"adda144e-c48d-4066-b711-4cb5888638f5","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'shifts.organization_id'","description":"Column 'organization_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for organization_id","line_number":null,"file_path":null},{"id":"eb6bb784-cb1a-4656-9ddf-3594463770fd","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'designations.organization_id'","description":"Column 'organization_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for organization_id","line_number":null,"file_path":null},{"id":"84c0e831-44c8-41fc-89c5-d051514dbebc","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'departments.organization_id'","description":"Column 'organization_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for organization_id","line_number":null,"file_path":null},{"id":"ebeabc43-859f-4a28-95e3-9eec97e2c484","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'performance_reviews.employee_id'","description":"Column 'employee_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for employee_id","line_number":null,"file_path":null},{"id":"040ae407-e34b-4662-a3ab-6a01e7b49205","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'performance_reviews.reviewer_id'","description":"Column 'reviewer_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for reviewer_id","line_number":null,"file_path":null},{"id":"df62ab46-8663-49e4-b5f7-90f92148d5c2","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'users.organization_id'","description":"Column 'organization_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for organization_id","line_number":null,"file_path":null},{"id":"b33a4fad-05a5-4e7e-bbca-c838f277a145","dimension":"Api","severity":"Major","title":"Analyzer execution failed: api","description":"(sqlite3.OperationalError) unable to open database file\n(Background on this error at: https://sqlalche.me/e/20/e3q8)","recommendation":"Check analyzer implementation and dependencies","line_number":null,"file_path":null},{"id":"efb1f778-147d-4a88-916d-aeea14e48c1e","dimension":"AI Layer","severity":"Major","title":"Insufficient input validation on AI calls","description":"Not all AI integrations validate input data (11/65)","recommendation":"Add schema validation before sending data to AI models","line_number":null,"file_path":null},{"id":"d491aee4-9903-407a-bd35-c0013b4e6cdb","dimension":"AI Layer","severity":"Major","title":"Unsafe AI Temperature Settings","description":"Found 64 AI calls without explicit low-temperature settings (risk of hallucinations).","recommendation":"Set temperature=0.0-0.2 for factual tasks.","line_number":null,"file_path":null},{"id":"18433fcb-37a2-4aa5-897a-5bea68590f3a","dimension":"AI Layer","severity":"Major","title":"Missing Grounding Instructions","description":"Found 64 AI prompts without grounding constraints.","recommendation":"Include 'only use provided context' or similar constraints in prompts.","line_number":null,"file_path":null},{"id":"cc2b8083-bcf0-4306-b7c6-0e6c6dd6cefd","dimension":"AI Layer","severity":"Major","title":"Missing Response Validation","description":"Found 59 AI calls without response validation.","recommendation":"Implement schema validation or parsing for AI outputs to catch malformed responses.","line_number":null,"file_path":null},{"id":"b0595e59-e860-41e6-bd4a-dfa31f581cde","dimension":"AI Layer","severity":"Major","title":"Insufficient Fallback Behavior","description":"Less than 50% of AI calls have fallback logic (0/65).","recommendation":"Implement graceful degradation with default responses when AI calls fail.","line_number":null,"file_path":null}],"minor_findings":[{"id":"1e452f28-b84b-4882-8b34-13b46402fa66","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'employees'","description":"Table has 67 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"20a11e78-d0a7-4447-8126-1be24a918175","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'organizations'","description":"Table has 29 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"9aadefac-c615-4d02-9d48-c99037575728","dimension":"Database","severity":"Minor","title":"Table 'employee_education' has no indexes","description":"May impact query performance","recommendation":"Consider adding indexes to employee_education","line_number":null,"file_path":null},{"id":"be3904c8-15f2-493b-806e-5576e93262f6","dimension":"Database","severity":"Minor","title":"Table 'employee_experience' has no indexes","description":"May impact query performance","recommendation":"Consider adding indexes to employee_experience","line_number":null,"file_path":null},{"id":"f3977f18-d2ca-4ed9-a5d2-0e26cec553d7","dimension":"Database","severity":"Minor","title":"Table 'employee_family' has no indexes","description":"May impact query performance","recommendation":"Consider adding indexes to employee_family","line_number":null,"file_path":null},{"id":"9facd702-2c45-4973-84c4-4d81e9307381","dimension":"Database","severity":"Minor","title":"Table 'employee_discipline' has no indexes","description":"May impact query performance","recommendation":"Consider adding indexes to employee_discipline","line_number":null,"file_path":null},{"id":"8b9a6c70-f1a3-4cde-95ca-1358a12bf1da","dimension":"Database","severity":"Minor","title":"Table 'employee_increments' has no indexes","description":"May impact query performance","recommendation":"Consider adding indexes to employee_increments","line_number":null,"file_path":null},{"id":"25335906-4cd5-4669-8837-e83618db6a35","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'system_flags'","description":"Table has 23 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"443972f7-d61c-4ff8-9dab-c698e2dd4441","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'notification_settings'","description":"Table has 33 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"82e9bbab-86f7-4a10-a49e-6993a991ae38","dimension":"AI Layer","severity":"Minor","title":"Incomplete AI error handling","description":"Some AI calls lack proper error handling (21/65)","recommendation":"Wrap AI calls in try-catch with fallback logic","line_number":null,"file_path":null},{"id":"f26556af-e92e-45bf-a846-373313f4c371","dimension":"DevOps","severity":"Minor","title":"Missing Security Policy","description":"SECURITY.md file found in root.","recommendation":"Add a SECURITY.md to define reporting procedures.","line_number":null,"file_path":null}],"technical_debt":[],"action_plan":[{"issue":"Test coverage estimated at 8%","area":"Testing","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'employees.department_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'employees.designation_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'employees.grade_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'employees.plant_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'employees.shift_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'organizations.tax_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'hr_plants.organization_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'grades.organization_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'sub_departments.organization_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null}],"policy_results":[{"name":"release_security_gate","pass_status":false,"message":"Rule evaluation failed: name 'hardcoded_secrets' is not defined","enforced":true,"rule":"security_score >= 3.5 AND hardcoded_secrets == 0"},{"name":"release_quality_gate","pass_status":false,"message":"Rule evaluation failed: name 'code_quality' is not defined","enforced":true,"rule":"code_quality >= 3.0 AND typescript_errors == 0"},{"name":"release_testing_gate","pass_status":false,"message":"Success","enforced":false,"rule":"testing_score >= 3.0 AND untested_critical_paths <= 2"},{"name":"overall_health_gate","pass_status":false,"message":"Rule evaluation failed: name 'critical_findings' is not defined","enforced":true,"rule":"overall_score >= 3.0 AND critical_findings == 0"}],"executed_by":"CLI-Runner","execution_time_seconds":20.137135982513428}