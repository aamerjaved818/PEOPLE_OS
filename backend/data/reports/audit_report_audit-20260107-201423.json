{"id":"audit-20260107-201423","created_at":"2026-01-07T20:14:52.726312","version":"1.0.0","scope":"Full System","overall_score":3.8,"critical_count":0,"major_count":22,"minor_count":21,"risk_level":"High","dimension_scores":[{"dimension":"Code Quality","score":5.0,"findings_count":0,"action_items_count":0,"details":{"typescript_errors":0,"eslint_errors":0,"python_errors":0,"type_coverage":100.0}},{"dimension":"Security","score":5.0,"findings_count":0,"action_items_count":0,"details":{"rbac_coverage":182,"exposed_secrets":0,"unprotected_endpoints":0,"rate_limited_endpoints":14}},{"dimension":"Testing","score":0.0,"findings_count":1,"action_items_count":0,"details":{"test_coverage":8,"total_tests":11,"test_files":18,"untested_critical_paths":0}},{"dimension":"Database","score":3.5,"findings_count":24,"action_items_count":0,"details":{"foreign_keys_enforced":1,"indexes_count":75,"tables_without_indexes":5,"migration_files":7,"orphaned_records_risk":0}},{"dimension":"Architecture","score":5.0,"findings_count":0,"action_items_count":0,"details":{"cycle_count":0,"boundary_violations":0,"modules_scanned":395,"dependency_edges":1362}},{"dimension":"UI/UX","score":4.8,"findings_count":0,"action_items_count":0,"details":{"hardcoded_colors":0,"hardcoded_spacing":7,"component_reuse":28,"accessibility_violations":1,"css_files":0,"responsive_layouts":61,"accessibility_files":["D:\\Python\\HCM_WEB\\modules\\admin\\SystemCleanup.tsx"]}},{"dimension":"AI Layer","score":5.0,"findings_count":6,"action_items_count":0,"details":{"ai_integrations":65,"unpinned_models":0,"prompt_versioning":2,"input_validation":11,"ai_error_handling":21,"temperature_control":1,"grounding_instructions":1,"response_validation":6,"citation_extraction":1,"context_limits":2,"prompt_injection_protection":1,"pii_redaction":2,"rate_limiting":2,"fallback_behavior":0}},{"dimension":"DevOps","score":5.0,"findings_count":1,"action_items_count":0,"details":{"deployment_scripts":1,"backup_strategy":1,"environment_config":2,"docker_support":0,"ci_cd_config":1}},{"dimension":"Drift Detection","score":0.5,"findings_count":9,"action_items_count":0,"details":{"adr_count":0,"drift_violation_count":0,"undocumented_modules":9}}],"critical_findings":[],"major_findings":[{"id":"015ab8b2-aa33-4dcc-bd99-209e0a007427","dimension":"Testing","severity":"Major","title":"Test coverage estimated at 8%","description":"Low test coverage detected","recommendation":"Add unit tests for core modules","line_number":null,"file_path":null},{"id":"d86a8ee3-ad1c-4eaf-b33e-7d0f876d321b","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'employees.department_id'","description":"Column 'department_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for department_id","line_number":null,"file_path":null},{"id":"3abddb72-c204-48a7-91a5-56bc0aafc46f","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'employees.designation_id'","description":"Column 'designation_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for designation_id","line_number":null,"file_path":null},{"id":"eba98b5c-9773-4f10-9afb-e4b9b3bb3184","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'employees.grade_id'","description":"Column 'grade_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for grade_id","line_number":null,"file_path":null},{"id":"e05272a5-0b5f-4487-b597-4a83462574fa","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'employees.plant_id'","description":"Column 'plant_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for plant_id","line_number":null,"file_path":null},{"id":"8799417a-aaa5-4db8-8bee-200f40ba5286","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'employees.shift_id'","description":"Column 'shift_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for shift_id","line_number":null,"file_path":null},{"id":"edd48487-fa88-4167-beca-e5bc80b39299","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'organizations.tax_id'","description":"Column 'tax_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for tax_id","line_number":null,"file_path":null},{"id":"1e9612d1-9a62-4b62-bcde-0f6827ffcfeb","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'hr_plants.organization_id'","description":"Column 'organization_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for organization_id","line_number":null,"file_path":null},{"id":"7989693a-32ce-41ae-8c20-19ce8b6be2dc","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'grades.organization_id'","description":"Column 'organization_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for organization_id","line_number":null,"file_path":null},{"id":"e47c711c-cb3f-4404-81dc-636746395fe5","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'sub_departments.organization_id'","description":"Column 'organization_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for organization_id","line_number":null,"file_path":null},{"id":"95034767-7667-484d-acf4-572835a5ca2c","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'shifts.organization_id'","description":"Column 'organization_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for organization_id","line_number":null,"file_path":null},{"id":"05e225f0-8e0e-4872-b231-0088586b07e3","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'designations.organization_id'","description":"Column 'organization_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for organization_id","line_number":null,"file_path":null},{"id":"e94be263-a8b7-4b7b-862c-9b1ca8093330","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'departments.organization_id'","description":"Column 'organization_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for organization_id","line_number":null,"file_path":null},{"id":"96cda6a5-f56a-4e76-8e08-1fd76a29576e","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'performance_reviews.employee_id'","description":"Column 'employee_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for employee_id","line_number":null,"file_path":null},{"id":"3a30bb11-29c0-4cd6-bcaa-099f054059b6","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'performance_reviews.reviewer_id'","description":"Column 'reviewer_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for reviewer_id","line_number":null,"file_path":null},{"id":"e094e782-6119-4ce3-9993-e4f92a0bad43","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'users.organization_id'","description":"Column 'organization_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for organization_id","line_number":null,"file_path":null},{"id":"00e1656b-1a06-4d2b-8f26-025f420850bf","dimension":"Api","severity":"Major","title":"Analyzer execution failed: api","description":"(sqlite3.OperationalError) unable to open database file\n(Background on this error at: https://sqlalche.me/e/20/e3q8)","recommendation":"Check analyzer implementation and dependencies","line_number":null,"file_path":null},{"id":"756b96cf-0e48-4b7a-b713-0c54b20d2176","dimension":"AI Layer","severity":"Major","title":"Insufficient input validation on AI calls","description":"Not all AI integrations validate input data (11/65)","recommendation":"Add schema validation before sending data to AI models","line_number":null,"file_path":null},{"id":"63441fd4-1b7b-4a63-9129-0f7cb35b50fd","dimension":"AI Layer","severity":"Major","title":"Unsafe AI Temperature Settings","description":"Found 64 AI calls without explicit low-temperature settings (risk of hallucinations).","recommendation":"Set temperature=0.0-0.2 for factual tasks.","line_number":null,"file_path":null},{"id":"c021768d-bde8-4aec-9c5f-e621d782b61a","dimension":"AI Layer","severity":"Major","title":"Missing Grounding Instructions","description":"Found 64 AI prompts without grounding constraints.","recommendation":"Include 'only use provided context' or similar constraints in prompts.","line_number":null,"file_path":null},{"id":"440e78ab-f744-400e-88eb-d8b6f7e6644e","dimension":"AI Layer","severity":"Major","title":"Missing Response Validation","description":"Found 59 AI calls without response validation.","recommendation":"Implement schema validation or parsing for AI outputs to catch malformed responses.","line_number":null,"file_path":null},{"id":"1e921ef9-cee6-4927-866e-dd92ab5c472a","dimension":"AI Layer","severity":"Major","title":"Insufficient Fallback Behavior","description":"Less than 50% of AI calls have fallback logic (0/65).","recommendation":"Implement graceful degradation with default responses when AI calls fail.","line_number":null,"file_path":null}],"minor_findings":[{"id":"bcf1f44b-8d0b-45af-abea-efb755448094","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'employees'","description":"Table has 67 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"1572b845-ad84-4c12-ae85-0ceef67ce0ed","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'organizations'","description":"Table has 29 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"e49eb3dd-a38c-4d4b-9632-c0f88e69556b","dimension":"Database","severity":"Minor","title":"Table 'employee_education' has no indexes","description":"May impact query performance","recommendation":"Consider adding indexes to employee_education","line_number":null,"file_path":null},{"id":"3f63d180-1129-4cee-8566-7d48fcf9eecf","dimension":"Database","severity":"Minor","title":"Table 'employee_experience' has no indexes","description":"May impact query performance","recommendation":"Consider adding indexes to employee_experience","line_number":null,"file_path":null},{"id":"11a27f61-638a-4ab3-94c8-94ae180affef","dimension":"Database","severity":"Minor","title":"Table 'employee_family' has no indexes","description":"May impact query performance","recommendation":"Consider adding indexes to employee_family","line_number":null,"file_path":null},{"id":"9a24edda-c646-4829-ba8f-7782ecbf2af5","dimension":"Database","severity":"Minor","title":"Table 'employee_discipline' has no indexes","description":"May impact query performance","recommendation":"Consider adding indexes to employee_discipline","line_number":null,"file_path":null},{"id":"cf12d712-c0b3-4589-bb33-1892dfb9ad3a","dimension":"Database","severity":"Minor","title":"Table 'employee_increments' has no indexes","description":"May impact query performance","recommendation":"Consider adding indexes to employee_increments","line_number":null,"file_path":null},{"id":"9da895d7-7a01-469a-8fd2-44b2a6073748","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'system_flags'","description":"Table has 23 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"fdd69f40-ab3f-48dc-a153-06df5b4178db","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'notification_settings'","description":"Table has 33 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"dd9f2cb8-08a5-400c-969b-73ca90309052","dimension":"AI Layer","severity":"Minor","title":"Incomplete AI error handling","description":"Some AI calls lack proper error handling (21/65)","recommendation":"Wrap AI calls in try-catch with fallback logic","line_number":null,"file_path":null},{"id":"c3220f74-d6dd-423a-8daa-e09e7a9e0fb1","dimension":"DevOps","severity":"Minor","title":"Missing Security Policy","description":"SECURITY.md file found in root.","recommendation":"Add a SECURITY.md to define reporting procedures.","line_number":null,"file_path":null},{"id":"5e9c73c1-6453-4707-85e9-a595511fc3fc","dimension":"Architecture","severity":"Minor","title":"Undocumented Module: admin","description":"No ADR or architectural documentation found for the 'admin' module.","recommendation":"Create an ADR summarizing the module's purpose and key decisions.","line_number":null,"file_path":null},{"id":"2d541481-b3e5-4173-9f27-ac47bba696e1","dimension":"Architecture","severity":"Minor","title":"Undocumented Module: analytics","description":"No ADR or architectural documentation found for the 'analytics' module.","recommendation":"Create an ADR summarizing the module's purpose and key decisions.","line_number":null,"file_path":null},{"id":"2d84f1b4-f9d1-42af-91ee-90c73337ff84","dimension":"Architecture","severity":"Minor","title":"Undocumented Module: assets","description":"No ADR or architectural documentation found for the 'assets' module.","recommendation":"Create an ADR summarizing the module's purpose and key decisions.","line_number":null,"file_path":null},{"id":"f8978034-e63c-4a03-bec4-3bc79a3e983f","dimension":"Architecture","severity":"Minor","title":"Undocumented Module: audit","description":"No ADR or architectural documentation found for the 'audit' module.","recommendation":"Create an ADR summarizing the module's purpose and key decisions.","line_number":null,"file_path":null},{"id":"9c58bac8-057f-4ba2-ad61-de0db5385d0f","dimension":"Architecture","severity":"Minor","title":"Undocumented Module: employee","description":"No ADR or architectural documentation found for the 'employee' module.","recommendation":"Create an ADR summarizing the module's purpose and key decisions.","line_number":null,"file_path":null},{"id":"19058d7c-16ca-44e5-8427-5c9b6edf01d8","dimension":"Architecture","severity":"Minor","title":"Undocumented Module: expenses","description":"No ADR or architectural documentation found for the 'expenses' module.","recommendation":"Create an ADR summarizing the module's purpose and key decisions.","line_number":null,"file_path":null},{"id":"90543f66-48ca-4a46-b20c-f6637f1b16b9","dimension":"Architecture","severity":"Minor","title":"Undocumented Module: org-profile","description":"No ADR or architectural documentation found for the 'org-profile' module.","recommendation":"Create an ADR summarizing the module's purpose and key decisions.","line_number":null,"file_path":null},{"id":"4ef9a7ba-1035-4a4d-a24d-b22053598ea5","dimension":"Architecture","severity":"Minor","title":"Undocumented Module: payroll","description":"No ADR or architectural documentation found for the 'payroll' module.","recommendation":"Create an ADR summarizing the module's purpose and key decisions.","line_number":null,"file_path":null},{"id":"ee9f5bb7-cf8e-4b0a-9d33-ab1303ba3062","dimension":"Architecture","severity":"Minor","title":"Undocumented Module: recruitment","description":"No ADR or architectural documentation found for the 'recruitment' module.","recommendation":"Create an ADR summarizing the module's purpose and key decisions.","line_number":null,"file_path":null},{"id":"8aabd152-44b1-46cc-b5c1-5a401848af1b","dimension":"Drift Detection","severity":"Minor","title":"Rule Violation: undocumented_modules","description":"Value 9 exceeded max 0","recommendation":"Improve undocumented_modules to meet policy","line_number":null,"file_path":null}],"technical_debt":[],"action_plan":[{"issue":"Test coverage estimated at 8%","area":"Testing","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'employees.department_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'employees.designation_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'employees.grade_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'employees.plant_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'employees.shift_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'organizations.tax_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'hr_plants.organization_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'grades.organization_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'sub_departments.organization_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null}],"policy_results":[{"name":"release_security_gate","pass_status":false,"message":"Rule evaluation failed: name 'hardcoded_secrets' is not defined","enforced":true,"rule":"security_score >= 3.5 AND hardcoded_secrets == 0"},{"name":"release_quality_gate","pass_status":false,"message":"Rule evaluation failed: name 'code_quality' is not defined","enforced":true,"rule":"code_quality >= 3.0 AND typescript_errors == 0"},{"name":"release_testing_gate","pass_status":false,"message":"Success","enforced":false,"rule":"testing_score >= 3.0 AND untested_critical_paths <= 2"},{"name":"overall_health_gate","pass_status":false,"message":"Rule evaluation failed: name 'critical_findings' is not defined","enforced":true,"rule":"overall_score >= 3.0 AND critical_findings == 0"}],"executed_by":"CLI-Runner","execution_time_seconds":29.562580108642578}