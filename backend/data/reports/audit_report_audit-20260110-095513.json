{"id":"audit-20260110-095513","created_at":"2026-01-10T09:55:32.658449","version":"1.0.0","scope":"Full System","overall_score":4.0,"critical_count":4,"major_count":10,"minor_count":9,"risk_level":"High","dimension_scores":[{"dimension":"Code Quality","score":5.0,"findings_count":0,"action_items_count":0,"details":{"typescript_errors":0,"eslint_errors":0,"python_errors":0,"type_coverage":100.0}},{"dimension":"Security","score":5.0,"findings_count":0,"action_items_count":0,"details":{"rbac_coverage":197,"exposed_secrets":0,"unprotected_endpoints":0,"rate_limited_endpoints":14}},{"dimension":"Testing","score":0.0,"findings_count":1,"action_items_count":0,"details":{"test_coverage":9,"total_tests":11,"test_files":18,"untested_critical_paths":0}},{"dimension":"Database","score":5.0,"findings_count":10,"action_items_count":0,"details":{"foreign_keys_enforced":1,"indexes_count":98,"tables_without_indexes":1,"migration_files":7,"orphaned_records_risk":0}},{"dimension":"API","score":0.5,"findings_count":5,"action_items_count":0,"details":{"total_endpoints":68,"versioned_endpoints":0,"breaking_changes":4,"new_endpoints":3,"schema_size_kb":129}},{"dimension":"Architecture","score":5.0,"findings_count":0,"action_items_count":0,"details":{"cycle_count":0,"boundary_violations":0,"modules_scanned":290,"dependency_edges":1135}},{"dimension":"UI/UX","score":4.2,"findings_count":0,"action_items_count":0,"details":{"hardcoded_colors":0,"hardcoded_spacing":31,"component_reuse":31,"accessibility_violations":5,"css_files":0,"responsive_layouts":61,"accessibility_files":["D:\\Python\\HCM_WEB\\modules\\SystemHealth.tsx","D:\\Python\\HCM_WEB\\modules\\admin\\SystemCleanup.tsx","D:\\Python\\HCM_WEB\\modules\\org-profile\\OrgChart.tsx","D:\\Python\\HCM_WEB\\components\\auth\\PermissionGate.tsx","D:\\Python\\HCM_WEB\\components\\auth\\RoleGuard.tsx"]}},{"dimension":"AI Layer","score":5.0,"findings_count":6,"action_items_count":0,"details":{"ai_integrations":54,"unpinned_models":0,"prompt_versioning":2,"input_validation":7,"ai_error_handling":17,"temperature_control":1,"grounding_instructions":1,"response_validation":5,"citation_extraction":1,"context_limits":2,"prompt_injection_protection":1,"pii_redaction":2,"rate_limiting":2,"fallback_behavior":0}},{"dimension":"DevOps","score":5.0,"findings_count":1,"action_items_count":0,"details":{"deployment_scripts":1,"backup_strategy":1,"environment_config":2,"docker_support":0,"ci_cd_config":1}},{"dimension":"Drift Detection","score":5.0,"findings_count":0,"action_items_count":0,"details":{"adr_count":9,"drift_violation_count":0,"undocumented_modules":0}}],"critical_findings":[{"id":"da46c6ec-6719-468b-8704-dbb39b3b6899","dimension":"API","severity":"Critical","title":"Breaking Change: Endpoint Removed","description":"Endpoint '/api/employment-types' was removed from API.","recommendation":"Restore endpoint or bump API version.","line_number":null,"file_path":null},{"id":"dc3e8008-5065-4acf-9b86-2a327bd0471e","dimension":"API","severity":"Critical","title":"Breaking Change: Endpoint Removed","description":"Endpoint '/api/goals' was removed from API.","recommendation":"Restore endpoint or bump API version.","line_number":null,"file_path":null},{"id":"c94b5217-8d59-40d1-a3f1-614387402e3c","dimension":"API","severity":"Critical","title":"Breaking Change: Endpoint Removed","description":"Endpoint '/api/employment-types/{type_id}' was removed from API.","recommendation":"Restore endpoint or bump API version.","line_number":null,"file_path":null},{"id":"effe5ad2-2fc6-4f48-84c6-49c88f0c59a5","dimension":"API","severity":"Critical","title":"Breaking Change: Endpoint Removed","description":"Endpoint '/api/goals/{goal_id}' was removed from API.","recommendation":"Restore endpoint or bump API version.","line_number":null,"file_path":null}],"major_findings":[{"id":"9feb3d51-dd7d-4fc0-9e30-78c43c737f87","dimension":"Testing","severity":"Major","title":"Test coverage estimated at 9%","description":"Low test coverage detected","recommendation":"Add unit tests for core modules","line_number":null,"file_path":null},{"id":"550ef833-c031-4fb2-afb5-c49d16080c86","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'organizations.tax_id'","description":"Column 'tax_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for tax_id","line_number":null,"file_path":null},{"id":"4b45daf6-439d-4e3f-aa24-d1e457658888","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'departments.plant_id'","description":"Column 'plant_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for plant_id","line_number":null,"file_path":null},{"id":"941e6285-7ee6-4006-b46c-d570d22358db","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'grades.employment_level_id'","description":"Column 'employment_level_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for employment_level_id","line_number":null,"file_path":null},{"id":"a831745a-d159-4eac-a6e3-0152ad6034f7","dimension":"Database","severity":"Major","title":"Unenforced Foreign Key: 'positions.designation_id'","description":"Column 'designation_id' suggests a relation but has no FK constraint.","recommendation":"Add FOREIGN KEY constraint for designation_id","line_number":null,"file_path":null},{"id":"488ed9c4-71cd-4c27-8306-7d4180858b0e","dimension":"AI Layer","severity":"Major","title":"Insufficient input validation on AI calls","description":"Not all AI integrations validate input data (7/54)","recommendation":"Add schema validation before sending data to AI models","line_number":null,"file_path":null},{"id":"0e5e2cd1-b512-4193-a402-256f9a9fcd71","dimension":"AI Layer","severity":"Major","title":"Unsafe AI Temperature Settings","description":"Found 53 AI calls without explicit low-temperature settings (risk of hallucinations).","recommendation":"Set temperature=0.0-0.2 for factual tasks.","line_number":null,"file_path":null},{"id":"7bc63427-0915-4535-b058-19c211e16836","dimension":"AI Layer","severity":"Major","title":"Missing Grounding Instructions","description":"Found 53 AI prompts without grounding constraints.","recommendation":"Include 'only use provided context' or similar constraints in prompts.","line_number":null,"file_path":null},{"id":"9b3b7651-b711-4233-8892-861ff64fe405","dimension":"AI Layer","severity":"Major","title":"Missing Response Validation","description":"Found 49 AI calls without response validation.","recommendation":"Implement schema validation or parsing for AI outputs to catch malformed responses.","line_number":null,"file_path":null},{"id":"bf7c6974-d878-405e-ae7a-4d331f2f0e87","dimension":"AI Layer","severity":"Major","title":"Insufficient Fallback Behavior","description":"Less than 50% of AI calls have fallback logic (0/54).","recommendation":"Implement graceful degradation with default responses when AI calls fail.","line_number":null,"file_path":null}],"minor_findings":[{"id":"afe0437a-3cd9-46cc-9e0d-74fb03f462e9","dimension":"Database","severity":"Minor","title":"Table 'test' has no indexes","description":"May impact query performance","recommendation":"Consider adding indexes to test","line_number":null,"file_path":null},{"id":"c71f5b09-2dc4-4e36-ab8d-019ba5fe33cc","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'organizations'","description":"Table has 27 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"0f12face-b2cb-430a-a1df-00e1986b9203","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'system_flags'","description":"Table has 23 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"2986cf59-8731-45de-9955-7a424a1af27a","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'notification_settings'","description":"Table has 33 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"21185024-e08b-42d3-b6ac-2695c544896b","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'employees'","description":"Table has 21 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"98a999a8-4594-4256-884c-a3c9d135a534","dimension":"Database","severity":"Minor","title":"Potential Denormalization: 'payroll_settings'","description":"Table has 22 columns (threshold: 20)","recommendation":"Consider standardizing schema or splitting tables.","line_number":null,"file_path":null},{"id":"42295e9d-88b5-48f8-871a-47b0634a0f44","dimension":"API","severity":"Minor","title":"No explicit API versioning","description":"Endpoints do not use /v1/ or similar prefixes.","recommendation":"Adopt URI versioning (e.g. /api/v1/resource).","line_number":null,"file_path":null},{"id":"7d331f65-db33-4c4c-a16f-741deaed96a5","dimension":"AI Layer","severity":"Minor","title":"Incomplete AI error handling","description":"Some AI calls lack proper error handling (17/54)","recommendation":"Wrap AI calls in try-catch with fallback logic","line_number":null,"file_path":null},{"id":"c57d719f-1343-45d4-95a1-c4d72fc042e6","dimension":"DevOps","severity":"Minor","title":"Missing Security Policy","description":"SECURITY.md file found in root.","recommendation":"Add a SECURITY.md to define reporting procedures.","line_number":null,"file_path":null}],"technical_debt":[],"action_plan":[{"issue":"Breaking Change: Endpoint Removed","area":"API","priority":"Critical","effort":"Days","eta":null,"owner":null},{"issue":"Breaking Change: Endpoint Removed","area":"API","priority":"Critical","effort":"Days","eta":null,"owner":null},{"issue":"Breaking Change: Endpoint Removed","area":"API","priority":"Critical","effort":"Days","eta":null,"owner":null},{"issue":"Breaking Change: Endpoint Removed","area":"API","priority":"Critical","effort":"Days","eta":null,"owner":null},{"issue":"Test coverage estimated at 9%","area":"Testing","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'organizations.tax_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'departments.plant_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'grades.employment_level_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Unenforced Foreign Key: 'positions.designation_id'","area":"Database","priority":"High","effort":"Hours","eta":null,"owner":null},{"issue":"Insufficient input validation on AI calls","area":"AI Layer","priority":"High","effort":"Hours","eta":null,"owner":null}],"policy_results":[{"name":"release_security_gate","pass_status":false,"message":"Rule evaluation failed: name 'hardcoded_secrets' is not defined","enforced":true,"rule":"security_score >= 3.5 AND hardcoded_secrets == 0"},{"name":"release_quality_gate","pass_status":false,"message":"Rule evaluation failed: name 'code_quality' is not defined","enforced":true,"rule":"code_quality >= 3.0 AND typescript_errors == 0"},{"name":"release_testing_gate","pass_status":false,"message":"Success","enforced":false,"rule":"testing_score >= 3.0 AND untested_critical_paths <= 2"},{"name":"overall_health_gate","pass_status":false,"message":"Rule evaluation failed: name 'critical_findings' is not defined","enforced":true,"rule":"overall_score >= 3.0 AND critical_findings == 0"}],"executed_by":"CLI-Runner","execution_time_seconds":19.168442010879517}